# Autogenerated by Chef.

filter {
  mutate {
    convert => [ "bytes", "integer" ]
  }

  if [clientip]  {
    geoip {
      source => "clientip"
      target => "geoip"
      add_field => [ "[geoip][coordinates]", "%{[geoip][longitude]}" ]
      add_field => [ "[geoip][coordinates]", "%{[geoip][latitude]}"  ]
    }
    mutate {
      convert => [ "[geoip][coordinates]", "float" ]
    }
  }
}

output {
  elasticsearch {
<% if @elasticsearch_ip -%>
    host => "<%= @elasticsearch_ip %>"
<% end -%>
<% if @elasticsearch_cluster -%>
    cluster => "<%= @elasticsearch_cluster %>"
<% end -%>
<% if @elasticsearch_embedded -%>
    embedded => true
<% end -%>
<% if @bind_host -%>
    bind_host => "<%= @bind_host %>"
<% end -%>
<% if @es_index -%>
    index => "<%= @es_index %>"
<% end -%>
  }
}
