# Autogenerated by Chef.
<% @instances.each do |instance_params| %>

input {
  file {
    path => "<%= File.join(node['tomcat']['base'], instance_params['name'], 'logs', 'catalina.out') %>"
    codec => json
    tags => [ "webapp", "<%= instance_params['name'] %>"]
    type => "webapp_<%= instance_params['name'] %>"
  }
}

filter {

  if [type] == "webapp_<%= instance_params['name'] %>" {

    # App specific filters.
    <%
       instance_params['apps'].each do |app_params|
         filter_config = FilterFinder.get_filter_config(app_params['artifact'])
         if filter_config
    %>
<%= render "config/filters_#{filter_config}.conf.erb" %>
    <%
         end
       end
    %>
  }
}

<% end %>
