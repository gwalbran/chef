println "Running WFS Scanner external config"

dataSource {
    jndiName = "java:comp/env/<%= @jndi_resources[0]['resource'] %>"
}

geoserver.response.cache.dir = "<%= File.join(@tomcat_base_directory, 'temp') %>"

log4j = {

    def appenderNames = []

    appenders {
        console name:'stdout', layout:pattern(conversionPattern: '[%-5p] %30.30c{3} - %m%n')
        appenderNames << 'stdout'

        <% if @nsca_password %>
        appender new de.viaboxx.nagios.NagiosAppender(
            name: 'nagiosAppender',
            nagiosHost: 'status.emii.org.au',
            nagiosPort: 5667,
            nagiosEncryption: "TRIPLE_DES",
            nagiosPassword: "<%= @nsca_password %>",
            monitoredServiceName: "<%= @nsca_service_name %>",
            monitoredHostName: "<%= @nsca_host_name %>"
        )
        appenderNames << 'nagiosAppender'
        <% else %>
        // Nagios appender not included
        <% end %>
    }

    root {
        error appenderNames.toArray()
    }

    error 'org.codehaus.groovy.grails.web.servlet',  //  controllers
        'org.codehaus.groovy.grails.web.pages', //  GSP
        'org.codehaus.groovy.grails.web.sitemesh', //  layouts
        'org.codehaus.groovy.grails.web.mapping.filter', // URL mapping
        'org.codehaus.groovy.grails.web.mapping', // URL mapping
        'org.codehaus.groovy.grails.commons', // core / classloading
        'org.codehaus.groovy.grails.plugins', // plugins
        'org.codehaus.groovy.grails.orm.hibernate', // hibernate integration
        'org.springframework',
        'org.hibernate',
        'net.sf.ehcache.hibernate'

    warn 'org.mortbay.log'

    info 'grails.app.controller',
        'grails.app.service.au.org.emii.wfsscanner.FilterHarvesterService',
        'au.org.emii.wfsscanner'
}
