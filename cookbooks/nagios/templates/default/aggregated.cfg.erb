# Aggregated monitors
#
# Autogenerated by Chef.

<%
@aggregated_monitors.each do |agg_monitor|
%>
define service {
  service_description <%= agg_monitor[:service_name] %>
  check_command check_nagios_monitors!"<%= agg_monitor[:url] %>"!"<%= @nagios_username %>"!"<%= @nagios_password %>"!<%= agg_monitor[:monitors] %>
  host_name aggregated-monitors-pseudo-host
  servicegroups aggregated
  use default-service-pnp
}
<%
end
%>

# Pseudo host for aggregated monitors
define host {
  use server-pnp
  address 127.0.0.1
  host_name aggregated-monitors-pseudo-host
  hostgroups all
}
